<!-- THIS IS A COMPILED FILE 
 Compiled on 2025-10-07 -->



































































































<!DOCTYPE html>

<head>
	
	<meta charset="UTF-8">
	<meta name="author" content="Todd Schmid">
	
	<!-- Renders latex formulas -->
	<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
	<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
	<!-- Renders tikz figures mid page -->
    <link rel="stylesheet" type="text/css" href="https://tikzjax.com/v1/fonts.css">
    <script src="https://tikzjax.com/v1/tikzjax.js"></script>
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link rel="stylesheet" href="../../../styles.css" />
	<link rel="stylesheet" href="../../course_styles.css" />
	<link rel="icon" href="../../../squidab.png" />
	
	<!-- * Customize for each course * -->
	<title>CSCI 341 Theory of Computation</title>
	<meta name="description" content="Course pages for CSCI 341.">
	<meta name="keywords" content="bucknell,theory,computer,science,schmid,csci341">
	<!-- ***************************** -->
</head>

<body>

<div id="content">

<!-- Header Section -->
<div id="course_head" style="text-align: left;">
	<h1 style="margin-bottom: 0; text-align: left;">CSCI 341 Theory of Computation</h1>
	<i>Fall 2025, with <a href="../../../teaching.html">Schmid</a></i>
	<div id="links">
		<!-- * Customize for each course * -->
		<a href="csci341_index.html"><span class="link">Syllabus</span></a>
		<a href="csci341_contents.html"><span class="link">Notes</span></a>
		<a href="csci341_resources.html"><span class="link">Resources</span></a>
		<a href= "csci341_assignments.html"><span class="link">Assignments</span></a>
		<!-- ***************************** -->
	</div>
</div>



<div id="stuff">


<!-- BEGINNING OF BODY -->
<div style="border: none; margin-bottom: -25px; padding: 0px; text-align: right;"><a href="../compiled/csci341_notes_0_00_what_is_computation.html"><span class="link"> &larr; what is computation</span></a><a href="../compiled/csci341_notes_1_01_automata.html"><span class="link">automata &rarr;</span></a></div><!--
- Directional Mazes    
- Sokoban Games
    • Legal moves as machine input
    • Winning
- State diagrams and transition tables
    • Visual representation of state machines
    • Winning states
- Lamps, unidirectional mazes, vending machines, combination locks, and legal identifiers in Python
-->

<h1>Puzzle games, solutions, and state diagrams</h1>

<p>
    If you haven't noticed this yet in your math-based courses, one of the quirks of an abstract mathematical definition is that it can apply to really unexpected examples.
    Part of the fun of theoretical computer science is that those abstract mathematical definitions are often not too hard to reverse engineer <i>from</i> the unexpected examples. 
    Case in point, let's play some puzzle games, shall we?
</p>

<!--Section-->
<h2>Some 2-D Puzzle Games</h2>

<!--subsection-->
<h3>Directional Mazes</h3>

<div class="definition">
    <b>(Directional Maze)</b>
    A <i>directional maze</i> \(M\) consists the following components:
    <ul>
        <li>An \(n\times m\) grid \(G\) of <i>positions</i>, where \(n\) and \(m\) are whole numbers</li>
        <li>A set of <i>legal positions</i> \(L \subseteq G\)</li>
        <li>Two postions called \(S\)tart and \(E\)nd</li>
        <li>A set of <i>legal moves</i> \(A \subseteq \{\Uparrow, \Downarrow, \Rightarrow, \Leftarrow\}\)</li>
        <li>A spelunker, \(C\)oby, that inhabits any legal position</li>
    </ul>
    You play a directional maze by applying legal moves to change the position of \(C\) from any legal position to any other legal position.
    A <i>solution</i> to a directional maze is a sequence of legal moves that takes \(C\) from \(S\) to \(E\).
</div>

<div class="figure" id="thesmileymaze">
    <img src="../imgs/smilemaze.png" />
    The Smiley Maze
</div>

<p>
    The directional maze above consists of a \(10\times 10\) grid of positions. 
    The set of legal positions \(L\) is the set of white or beige positions, and in this case the only legal moves are \(A = \{\Rightarrow, \Uparrow\}\).
</p>
<p style="color:red">
    <b>Note.</b> We assume throughout this section that attempting a move from a legal position to a non-legal position ends the game.
</p>

<div class="exercise">
    <b>(Smiley Maze)</b>
    <ol>
        <li>Does the sequence \(\Uparrow\Uparrow\Uparrow\Rightarrow\Uparrow\) solve the Smiley Maze?</li>
        <li>Find a solution to the Smiley Maze, in the form of a <i>sequence of legal moves from \(A\)</i>.</li>
        <li>How many solutions are there?</li>
        <li>Change one position on the grid from illegal to legal such that there is exactly one additional solution after the change.</li>
    </ol>
    If you're not feeling <i>over it</i> yet, repeat this exercise a second time for the Spotted Maze below.
</div>

<div class="figure" id="thespottedmaze">
    <img src="../imgs/dirmaze1.png" />
    The Spotted Maze. The \(S\)tart is in the bottom-left corner and the \(E\)nd is in the top right.
</div>

<p>
    So, we have already seen that a <i>solution</i> is a sequence of legal moves that brings \(C\)oby from the \(S\)tart to the \(E\)nd of the maze.
    We have already seen that more than one solution can exist for a particular maze. 
</p>

<div class="definition">
    <b>(Solution to a Directional Maze)</b>
    Given a directional maze \(M = (G, L, S, E, A, C)\), the <i>solution space</i> of \(M\) is set of all sequences of legal moves from \(A\) that bring \(C\) from \(S\) to \(E\).
    The solution space is written \(\mathcal S(M)\).
</div>

<div class="exercise">
    <b>(Sunshine)</b>
    Find a directional maze \(M\) whose solution space is exactly 
    \[
    \mathcal S(M) = \{\Uparrow\Uparrow\Uparrow\Rightarrow\Rightarrow\Uparrow, \Uparrow\Rightarrow\Rightarrow\Uparrow\Uparrow\Uparrow\}
    \]
    In other words, there are exactly two solutions in \(\mathcal S(M)\).
    If you haven't already, try to find the smallest one, and convince yourself that it is indeed the smallest.
    <div class="hint">
        How tall must the game board be?
    </div>
</div>

<div class="exercise">
    <b>(No Upper Bounds)</b>
    Find a directional maze that has an <i>infinite</i> solution space (again, try to find the smallest one).
    <div class="hint">
        You are allowed to change \(A\). 
        See the definition of directional maze above.
    </div>
</div>

<div class="problem">
    <b>(Always an Upper Bound)</b>
    Let \(M = (G, L, S, E, A, C)\) be a directional maze with the set of legal moves \(A = \{\Uparrow, \Rightarrow\}\).
    Prove that \(\mathcal S(M)\) is finite (there are only finitely many elements) by calculating an upper bound on the number of all possible legal paths through an \(n\times m\) directional maze.
</div>

<!--Section-->
<h3>Sokoban games</h3>
<p>
    <i>Sokoban</i> is a puzzle videogame developed by <a href="https://en.wikipedia.org/wiki/Thinking_Rabbit" target="_blank">Thinking Rabbit</a> in the 1980s.
    The format of the game is very similar to a directional maze: you control a character by instructing them to perform one of four legal moves \(\{\Uparrow, \Rightarrow, \Leftarrow, \Downarrow\}\) to move from one legal position to another. 
    The difference is an added element: there are <i>boxes</i> you have to push into certain <i>finishing positions</i>.
    It's a little easier to understand the game once you've played it a bit.
</p>

<div class="figure">
    <iframe src="https://www.mathsisfun.com/games/a/sokoban/index.html" width="300" height="375" style="display:block;margin-bottom: 10px;margin-left:auto;margin-right:auto"></iframe>
    A Sokoban game from <a href="https://www.mathsisfun.com/">Math Is Fun</a>.
    Use the arrow keys to move the character around (go to <a href="https://www.mathsisfun.com/games/sokoban.html" target="_blank">the actual page</a> for a better gaming experience on levels other than 1).
</div>

<p>
    We are always going to assume that the set of legal moves in a Sokoban game is \(A = \{\Uparrow, \Rightarrow, \Leftarrow, \Downarrow\}\).
    Similar to the situation in a directional maze, a <i>solution</i> is a sequence of legal moves that put boxes over all of the finishing positions (the red dots).
    In this case, the <i>starting configuration</i> of the game really matters!
</p>

<div class="figure" id="firstpush">
    <img src="../imgs/sokoban1.png" />
    Three more (smaller) Sokoban games, (A), (B), and (C).
</div>

<div class="exercise" id="FirstPush">
    <b>(First Push)</b>
    Describe the solution spaces of each of the Sokoban games (A), (B), and (C) above.
    
    <div class="hint">
        Two out of the three of them have infinite solution spaces.
    </div>
</div>

<!--Section-->
<h2>State Diagrams</h2>
<p>
    In directional mazes and Sokoban games, hitting the arrow keys is what allows us to transform one configuration of the game board into another.
    The computer science words for <i>configuration</i> and <i>transform</i> are <i>state</i> and <i>transition</i> respectively.
</p>

<div class="definition">
    <b>(State and Transition)</b>
    A <i>state</i> of a system (including games like directional mazes and Sokoban) consists of all of the data of the system that can be determined at a fixed point in time. 
    In games, a state consists of all of the positions of the tokens (like the spelunker, the boxes, and the box pusher).
    A <i>state transition</i> is a transformation of one state into another mediated by a legal move.
    If \(s_0\) and \(s_1\) are states and there is a legal move \(a \in A\) that takes \(s_0\) to \(s_1\), then we write \(s_0 \xrightarrow{a} s_1\).
</div>

<div class="figure" id="firststatediagram">
    <img src="../imgs/sokobanstates1.png" />
    Two state transitions between three states \(s_0,s_1,s_2\), respectively, of of <a href="#firstpush">Sokoban game (A)</a>.
    Written using the <i>labelled-arrow notation</i> \(s_0 \xrightarrow{\Leftarrow} s_1 \xrightarrow{\Uparrow} s_2\).
</div>

<div class="exercise">
    <b>(More States)</b>
    Draw three more states of Sokoban game (C), including a state in winning position, and draw all of the transitions that are possible between the six resulting states.
    Further indicate that a state is in winning position by drawing a circle around it.
</div>

<div class="definition">
    <b>(Reachable)</b>
    A state \(s\) is <i>reachable</i> from a state \(s_0\) if there is a sequence of state transitions \(s_0 \xrightarrow{a_0} s_1 \xrightarrow{a_1} \cdots \xrightarrow{a_n} s\) that begins for some legal moves \(a_0,a_1,\dots,a_n \in A\).
</div>

<div class="exercise">
    <b>(Even More States!)</b>
    How many states are reachable from Sokoban game (A) in total?
</div>

<p>
    The <a href="#firststatediagram">picture above</a> and your solution to the State and Transition exercise that came after it is what's called a <i>state diagram</i>.
    The state diagram with six states that you drew is not a <i>complete</i> state diagram, because not every state (and state transition) appears in it.
    These can be a bit difficult to draw usually, because even simple games can have very complex state diagrams.
</p>

<div class="figure" id="sokoband">
    <img src="../imgs/sixstatesokoban.png" />
    Sokoban game (D).
</div>

<div class="exercise">
    <b>(A Complete State Diagram)</b>
    Draw the complete state diagram of all seven states reachable from Sokoban game (D) above.
    Indicate that a state is in a winning position by drawing an extra circle around it.
</div>

<p>
    As you might have discovered already, state diagrams don't always need have the full configuration of the game drawn into every state.
    Forgetting about all of that extra information and just drawing little labelled circles for states (maybe the label describes the state a little bit) is a lot more convenient.
    A state diagram that doesn't have any description at all written into each state is called an <i>abstract state diagram</i>, because the precise nature of every state has been abstracted away.
</p>

<div class="exercise">
    <b>(Abstracting Away)</b>
    Draw abstract state diagrams for Sokoban games <a href="#sokoband">(D)</a> and <a href="#firstpush">(B)</a>.
</div>

<div class="figure" id="abstract-A">
    <img src="../imgs/reverseengineering.svg" />
    Abstract state diagram (1).
</div>

<div class="problem">
    <b>(Reverse Engineering)</b>
    Find a Sokoban game that represents state \(s_1\) in abstract state diagram (1).
    Replace the states in the state diagram with drawings of each state of the Sokoban game.
</div>

<div class="problem">
    <b>(Impossibility)</b>
    Prove that there <i>does not</i> exist a directional maze that represents state \(s_1\) in abstract state diagram (1).
    <div class="hint">Determine the set of legal moves \(A\). Is there a way that legal moves interact in a directional maze that you won't always see in a Sokoban game?</div>
</div>

<!--subsection-->
<h3>Transition Tables</h3>
<p>
    A more formal way of writing down a state diagram is a <i>transition table</i>.
    We will leave the formal definition for next time, when we start to treat state diagrams as formal entities called <i>automata</i>, but the basic idea should be intuitive.
    A transition table records all the state transitions in one big table. 
    For example, the state diagram for <a href="#abstract-A">abstract state diagram (1)</a> is the table below:
</p>

<div class="figure">
    <table>
        <tr>
            <td>\(\textcolor{gray}{\rightarrow}\)</td>
            <td>\(\Uparrow\)</td>
            <td>\(\Rightarrow\)</td>
            <td>\(\Downarrow\)</td>
            <td>\(\Leftarrow\)</td>
        </tr>
        <tr>
            <td>\(s_1\)</td>
            <td></td>
            <td>\(s_2\)</td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>\(s_2\)</td>
            <td></td>
            <td></td>
            <td>\(s_3\)</td>
            <td>\(s_4\)</td>
        </tr>
        <tr>
            <td>\(s_3\)</td>
            <td>\(s_2\)</td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>\(s_4\)</td>
            <td></td>
            <td>\(s_2\)</td>
            <td></td>
            <td></td>
        </tr>
    </table>
    The transition table for abstract state diagram (1).
</div>

<p>
    In the left-most column of the table, you can see the states of the state diagram, and at the top (in the first row) you can see all the legal moves.
    If \(s\) is a state and \(a\) is a legal move, then if the \((s, a)\)-indexed item in the table is the state \(t\), then you should read: \(s \xrightarrow{a} t\).
    For example, in the transition table for abstract state diagram (1), you can see that the \((s_3,\Uparrow)\)-indexed item is \(s_2\), because \(s_3 \xrightarrow{\Uparrow} s_2\).
</p>

<div class="exercise">
    <b>(Transition Tables)</b>
    Write out the transition tables for Sokoban Games (D) and (B).
</div><div style="border: none; margin-bottom: -25px; padding: 0px; text-align: right;"><a href="../compiled/csci341_notes_0_00_what_is_computation.html"><span class="link"> &larr; what is computation</span></a><a href="../compiled/csci341_notes_1_01_automata.html"><span class="link">automata &rarr;</span></a></div>


<!-- END OF BODY -->
    <div style="height: 50px;border-top: 1px solid rgb(131, 131, 131);margin-top: 50px; padding: 20px; text-align: right;">
        <a href=""><span class="link">Top</span></a>
    </div>
</div>
</div>
</body>


</html>